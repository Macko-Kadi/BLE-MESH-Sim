<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="pl">
<head>
<!-- Generated by javadoc (1.8.0_66) on Fri Mar 09 14:33:18 CET 2018 -->
<title>Node</title>
<meta name="date" content="2018-03-09">
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="Style">
<script type="text/javascript" src="script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Node";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":9,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":10,"i26":10,"i27":10,"i28":10,"i29":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Node.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="deprecated-list.html">Deprecated</a></li>
<li><a href="index-files/index-1.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="Medium.html" title="class in &lt;Unnamed&gt;"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="Node.Battery.html" title="class in &lt;Unnamed&gt;"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="index.html?Node.html" target="_top">Frames</a></li>
<li><a href="Node.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<h2 title="Class Node" class="title">Class Node</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>Node</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>class <span class="typeNameLabel">Node</span>
extends java.lang.Object</pre>
<div class="block"><pre>
 The class provides a BLE MESH node
 
 TODO: Role of the node (Roles may change during simulation - so keep it in mind before you use inheritance):
                                1. Provisioner that set up roles of other nodes (and request them to go sleep and so on (?))
                                2. Relay - a node that forwards received packets (THE implementation is like that)
                                3. MeasuringNode (?) - sends only data it generates (temperature ?) and piggybacks metadata
                                4. Gateway - a node that collects data
                                5. Friend/LittleFriend (?) scheme - Friend keeps packets destinated for LittleFriend (eg. when it sleeps) and when requested - Friend send it 
                                6. ??????
 
 TODO: Profiles - different type of packets 
                                1. metadata about a node state - battery level, noise level, received power level (?) 
                                2. communication with and without acknowledgments (NO ACK scheme implemented) 
 TODO: Statistics: 
                                1. How many packets send, how many received ? (for each relation)
                                2. How many times a packet was received by a node ? (redundancy) 
                                3. Number of successfull/unsuccessfult transmisions
 TODO:  ????
 
 Some functions are based on the document: Yet Another Network Simulator (auth. Lacage, Henderson), chapter 8.1.
 I will use YANS abbrevation when refering to the document.
 </pre></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.Battery.html" title="class in &lt;Unnamed&gt;">Node.Battery</a></span></code>
<div class="block">
 The class provides a battery.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.Cache.html" title="class in &lt;Unnamed&gt;">Node.Cache</a></span></code>
<div class="block">The class provides a cache object.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.Noise.html" title="class in &lt;Unnamed&gt;">Node.Noise</a></span></code>
<div class="block">Simple structure that represents current noise lvl (as seen by the node) and the time when the noise started.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.PacketsSource.html" title="class in &lt;Unnamed&gt;">Node.PacketsSource</a></span></code>
<div class="block">Source that generates packets.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.Reception.html" title="class in &lt;Unnamed&gt;">Node.Reception</a></span></code>
<div class="block">
 Act of receiving of a transmission.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="Node.Battery.html" title="class in &lt;Unnamed&gt;">Node.Battery</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#battery">battery</a></span></code>
<div class="block">Each node has a battery or is power supplied
 When power supplied - battery = null;</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#batteryPowered">batteryPowered</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="Node.Cache.html" title="class in &lt;Unnamed&gt;">Node.Cache</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#cache">cache</a></span></code>
<div class="block">A cache that contains a list of received packets.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="Transmission.html" title="class in &lt;Unnamed&gt;">Transmission</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#currentTransmission">currentTransmission</a></span></code>
<div class="block">The object represents currently transmitted transmission
 It is null if node is not transmitting</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private float</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#currentTransmissionPower">currentTransmissionPower</a></span></code>
<div class="block">The value decreases when battery level goes down (and does not change when power-supplied)
 Initial value = MAX_TRANSMISSION_POWER</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static float</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#ENERGY_DETECTION_THRESHOLD">ENERGY_DETECTION_THRESHOLD</a></span></code>
<div class="block">If noise power is greater than the level - phyState=3 (CCA_BUSY) - a node can't start transmission</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) java.util.ArrayList&lt;java.lang.Byte&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#groupIDs">groupIDs</a></span></code>
<div class="block">Each node may be a member of a number of groups
 
 TODO: implement group related functions (join, leave, and so on)!</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) byte</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#ID">ID</a></span></code>
<div class="block">Each node has an ID.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static float[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#IN_STATE_ENERGY_CONSUMPTION">IN_STATE_ENERGY_CONSUMPTION</a></span></code>
<div class="block">
 I've assumed that during transmission a node consumes maxTransmissionPower, no matter of currentTransmissionPower.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static float</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#INTERFACE_SPEED">INTERFACE_SPEED</a></span></code>
<div class="block">Interface speed - 1Mbit/s</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static float</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#MAX_BACKOFF_TIME">MAX_BACKOFF_TIME</a></span></code>
<div class="block">Maximum backoff time that may be generated 
 
 TODO: Is the value realistic ?</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static float</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#MAX_TRANSMISSION_POWER">MAX_TRANSMISSION_POWER</a></span></code>
<div class="block">
 We will use dBm as a power unit.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static float</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#MIN_SNR_RCVD_P0">MIN_SNR_RCVD_P0</a></span></code>
<div class="block">Minimum SNR level required for non-zero probability of successful transmission reception.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static float</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#MIN_SNR_RCVD_P1">MIN_SNR_RCVD_P1</a></span></code>
<div class="block">Minimum SNR level required for certainty (P=1) of successful transmission reception.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static float</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#MIN_SNR_SYNC_P0">MIN_SNR_SYNC_P0</a></span></code>
<div class="block">
 ATTENTION: It is important to distinguish synchronization and data reception phases.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static float</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#MIN_SNR_SYNC_P1">MIN_SNR_SYNC_P1</a></span></code>
<div class="block">
 ATTENTION: It is important to distinguish synchronization and data reception phases.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#nodeState">nodeState</a></span></code>
<div class="block">
 A node can be in various states:
 
 TURNED_OFF:            discharged - does not do anything 
 TRANSMITTING:  can't synchronize to new transmission
 IDLE:                  can do anything
 SLEEP:                 same as TURNED_OFF but a node goes sleep for a specified time, then goes IDLE
 DEEP_SLEEP:            sleep with no accurate clock - same as sleep, but sleeps for +- specified time
 ???</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="Node.PacketsSource.html" title="class in &lt;Unnamed&gt;">Node.PacketsSource</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#packetsSource">packetsSource</a></span></code>
<div class="block">Source that generates packets</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#phyState">phyState</a></span></code>
<div class="block">
 Physical layer can be in 5 states:
 
 From YANS
 TX:                    the PHY is currently transmitting a signal on behalf of its associated MAC
 SYNC:          the PHY is synchronized on a signal and is waiting until it has received its last bit to forward it to the MAC
 IDLE:          the PHY is not in the TX or SYNC states and the energy measured on the medium is LOWER than Energy Detection Threshold (ENERGY_DETECTION_THRESHOLD)
 CCA_BUSY:      the PHY is not in the TX or SYNC states but the energy measured on the medium is HIGHER than Energy Detection Threshold (ENERGY_DETECTION_THRESHOLD)
 NONE:          node is turned off/sleep        
 
 Or in another words:
 TX:                    sending
 SYNC:          receiving
 IDLE:          idle, can start transmission - noise level is low (no other transmissions or transmissions far away)
 CCA_BUSY:      idle, can't start transmission - noise level is high (sum of other transmissions power is too high to start transmission)
 NONE                   node is turned off/sleep        
 </div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="Position.html" title="class in &lt;Unnamed&gt;">Position</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#position">position</a></span></code>
<div class="block">Each node has an (x, y) position.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) java.util.ArrayList&lt;<a href="Packet.html" title="class in &lt;Unnamed&gt;">Packet</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#queue">queue</a></span></code>
<div class="block">Queue of packets to send
 
 TODO: Is there always only one queue ?</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="Node.Reception.html" title="class in &lt;Unnamed&gt;">Node.Reception</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#syncedReception">syncedReception</a></span></code>
<div class="block">The object represents currently synced transmission and their parameters (encapsulated in Reception object)
 It is null if there is no currently synced reception</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="Node.html#Node-byte-float:A-byte-byte-float:A-int-">Node</a></span>(byte&nbsp;id_,
    float[]&nbsp;position_,
    byte&nbsp;batteryType_,
    byte&nbsp;packetsSourceType_,
    float[]&nbsp;packetsSourceParameters_,
    int&nbsp;cacheSize_)</code>
<div class="block">Node constructor</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#addPacketToCache-Packet-">addPacketToCache</a></span>(<a href="Packet.html" title="class in &lt;Unnamed&gt;">Packet</a>&nbsp;p)</code>&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>(package private) <a href="Event.html" title="class in &lt;Unnamed&gt;">Event</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#addPacketToQueue-Packet-">addPacketToQueue</a></span>(<a href="Packet.html" title="class in &lt;Unnamed&gt;">Packet</a>&nbsp;p)</code>
<div class="block">
 Adds packet to the queue.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#determinePhyState--">determinePhyState</a></span>()</code>
<div class="block">If phyState == IDLE or CCA_BUSY - compares noise lvl with ENERGY_DETECTION_THRESHOLD and sets phyState to IDLE or CCA_BUSY</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#doesNodeBelongToDestinationGroup-Packet-">doesNodeBelongToDestinationGroup</a></span>(<a href="Packet.html" title="class in &lt;Unnamed&gt;">Packet</a>&nbsp;p)</code>
<div class="block">Whether packet is destinated for the group the node belongs to</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#drainBattery--">drainBattery</a></span>()</code>
<div class="block">Drains battery with certain power</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>(package private) <a href="Event.html" title="class in &lt;Unnamed&gt;">Event</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#endOfSyncedReception-Transmission-">endOfSyncedReception</a></span>(<a href="Transmission.html" title="class in &lt;Unnamed&gt;">Transmission</a>&nbsp;t)</code>
<div class="block">
 Actions related with the end of synced reception.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>(package private) <a href="Event.html" title="class in &lt;Unnamed&gt;">Event</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#endOfTransmission--">endOfTransmission</a></span>()</code>
<div class="block">End of transmission.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>(package private) java.util.ArrayList&lt;<a href="Event.html" title="class in &lt;Unnamed&gt;">Event</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#generatePacket--">generatePacket</a></span>()</code>
<div class="block">
 Packet generation may trigger two Events: 
 1) It always generate NEXT_PACKET_GEN Event, and
 2) addPacketToQueue, if queue was empty, Start backoff procedure, TRY_TO_START_TRANSMISSION
 
 ArrayList of Events is used instead of EventList - I don't need to sort events in this list - they need to be sorted anyway later.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>(package private) double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#getCurrentBatteryLevel--">getCurrentBatteryLevel</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>(package private) float</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#getCurrentTransmissionPower--">getCurrentTransmissionPower</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>private <a href="Packet.html" title="class in &lt;Unnamed&gt;">Packet</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#getFirstPacketFromQueue--">getFirstPacketFromQueue</a></span>()</code>
<div class="block">Get the first packet from the queue and remove it from the queue (only one queue per node is assumed)</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>(package private) java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#getNodeState--">getNodeState</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>private static byte</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#getNodeStateNr-java.lang.String-">getNodeStateNr</a></span>(java.lang.String&nbsp;nodeState_)</code>
<div class="block">Points at a proper position in inStateEnergyConsumption.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>(package private) java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#getPhyState--">getPhyState</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>(package private) <a href="Event.html" title="class in &lt;Unnamed&gt;">Event</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#goSleep-float-">goSleep</a></span>(float&nbsp;duration)</code>
<div class="block">Node goes to sleep for a given time</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#isAbleToReceive--">isAbleToReceive</a></span>()</code>
<div class="block">The node can receive a transmission only when it is turned on (thus nodeState == IDLE or TRANSMITTING)</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#isAbleToSync--">isAbleToSync</a></span>()</code>
<div class="block">Checks if a node is able to sync, node is idle and (phyState is IDLE or CCA)</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#isAbleToTransmit--">isAbleToTransmit</a></span>()</code>
<div class="block">Checks if a node is able to transmit: node is IDLE, phyState is IDLE, there is something to send</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#isNodeDestination-Packet-">isNodeDestination</a></span>(<a href="Packet.html" title="class in &lt;Unnamed&gt;">Packet</a>&nbsp;p)</code>
<div class="block">Whether packet is destinated for the node</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#isQueueEmpty--">isQueueEmpty</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#nodeStateChange-java.lang.String-">nodeStateChange</a></span>(java.lang.String&nbsp;nodeState_)</code>
<div class="block">
 Changes the nodeState.</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#performPacketActions-Packet-">performPacketActions</a></span>(<a href="Packet.html" title="class in &lt;Unnamed&gt;">Packet</a>&nbsp;p)</code>
<div class="block">TODO: Actions related with packet performing eg. nodeStateChange (the ProvisionerNode (?)</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>private <a href="Event.html" title="class in &lt;Unnamed&gt;">Event</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#processPacket-Packet-">processPacket</a></span>(<a href="Packet.html" title="class in &lt;Unnamed&gt;">Packet</a>&nbsp;p)</code>
<div class="block">If packet already cached - do nothing.</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#putInBattery-byte-">putInBattery</a></span>(byte&nbsp;batteryType_)</code>
<div class="block">Initializes battery object</div>
</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>(package private) <a href="Event.html" title="class in &lt;Unnamed&gt;">Event</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#startBackoffProcedure--">startBackoffProcedure</a></span>()</code>
<div class="block">
 I've decided to make it very simple at the moment so I don't use BackoffCounter object and any logic.</div>
</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>(package private) <a href="Event.html" title="class in &lt;Unnamed&gt;">Event</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#startReceiving-Transmission-">startReceiving</a></span>(<a href="Transmission.html" title="class in &lt;Unnamed&gt;">Transmission</a>&nbsp;t)</code>&nbsp;</td>
</tr>
<tr id="i26" class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#switchOff--">switchOff</a></span>()</code>
<div class="block">switches Node into the TURNED_OFF state.</div>
</td>
</tr>
<tr id="i27" class="rowColor">
<td class="colFirst"><code>(package private) <a href="Event.html" title="class in &lt;Unnamed&gt;">Event</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#tryToStartTransmission--">tryToStartTransmission</a></span>()</code>
<div class="block">Tries to start a transmission.</div>
</td>
</tr>
<tr id="i28" class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#updateTransmissionPower--">updateTransmissionPower</a></span>()</code>
<div class="block">
 Updates node currentTransmissionPower based on node state (battery level and (???)</div>
</td>
</tr>
<tr id="i29" class="rowColor">
<td class="colFirst"><code>(package private) java.util.ArrayList&lt;<a href="Event.html" title="class in &lt;Unnamed&gt;">Event</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="Node.html#wakeUp--">wakeUp</a></span>()</code>
<div class="block">TODO: Specify, how a node behaves after waking up.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="INTERFACE_SPEED">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>INTERFACE_SPEED</h4>
<pre>static final&nbsp;float INTERFACE_SPEED</pre>
<div class="block">Interface speed - 1Mbit/s</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="constant-values.html#Node.INTERFACE_SPEED">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="MAX_TRANSMISSION_POWER">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MAX_TRANSMISSION_POWER</h4>
<pre>private static final&nbsp;float MAX_TRANSMISSION_POWER</pre>
<div class="block"><pre>
 We will use dBm as a power unit. Typically (?), for BLE 1Mbit/s, 10mW=10dBm is used.
 TODO: confirm the value
 </pre></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="constant-values.html#Node.MAX_TRANSMISSION_POWER">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="ENERGY_DETECTION_THRESHOLD">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ENERGY_DETECTION_THRESHOLD</h4>
<pre>private static final&nbsp;float ENERGY_DETECTION_THRESHOLD</pre>
<div class="block">If noise power is greater than the level - phyState=3 (CCA_BUSY) - a node can't start transmission</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="constant-values.html#Node.ENERGY_DETECTION_THRESHOLD">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="MIN_SNR_SYNC_P0">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MIN_SNR_SYNC_P0</h4>
<pre>private static final&nbsp;float MIN_SNR_SYNC_P0</pre>
<div class="block"><pre>
 ATTENTION: It is important to distinguish synchronization and data reception phases. 
 
 We should prevent situation when a node synchronizes to a transmission that has no chance to be successfully received.
 It is important, because, when a node is synchronized to one transmission (phyState=="SYNC"), all other transmissions cannot be synchronized (thus successfully received).
  
 Minimum SNR level required for non zero probability of successfull synchronization.
 If the level is lower than the value a node has no chance to sync to the transmission.
 
 If the value should be different for different nodes, remove 'static'.
 
 TODO: Is the value realistic ? I used these http://www.wireless-nets.com/resources/tutorials/define_SNR_values.html
 </pre></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="constant-values.html#Node.MIN_SNR_SYNC_P0">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="MIN_SNR_SYNC_P1">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MIN_SNR_SYNC_P1</h4>
<pre>private static final&nbsp;float MIN_SNR_SYNC_P1</pre>
<div class="block"><pre>
 ATTENTION: It is important to distinguish synchronization and data reception phases. 
 
 We should prevent situation when a node synchronizes to a transmission that has no chance to be successfully received.
 It is important, because, when a node is synchronized to one transmission (phyState=="SYNC"), all other transmissions cannot be synchronized (thus successfully received).
  
 Minimum SNR level required for certainty (P=1) of successful synchronization (so a node changes PhyState to SYNC).
 
 If the value should be different for different nodes, remove 'static'.
 
 TODO: Is the value realistic ? I used these http://www.wireless-nets.com/resources/tutorials/define_SNR_values.html
  </pre></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="constant-values.html#Node.MIN_SNR_SYNC_P1">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="MIN_SNR_RCVD_P0">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MIN_SNR_RCVD_P0</h4>
<pre>private static final&nbsp;float MIN_SNR_RCVD_P0</pre>
<div class="block">Minimum SNR level required for non-zero probability of successful transmission reception.
 It allows to assign failure to a reception at its beginning (so there is no need to calculate how noise level changes during the reception and so on)
 
 If the value should be different for different nodes, remove 'static'.
 
 TODO: Is the value realistic ?</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="constant-values.html#Node.MIN_SNR_RCVD_P0">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="MIN_SNR_RCVD_P1">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MIN_SNR_RCVD_P1</h4>
<pre>private static final&nbsp;float MIN_SNR_RCVD_P1</pre>
<div class="block">Minimum SNR level required for certainty (P=1) of successful transmission reception.
 If SNR is greater than the value, transmission is always successfully received.
 
 If the value should be different for different nodes, remove 'static'.
 
 TODO: Is the value realistic ?</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="constant-values.html#Node.MIN_SNR_RCVD_P1">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="IN_STATE_ENERGY_CONSUMPTION">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>IN_STATE_ENERGY_CONSUMPTION</h4>
<pre>private static final&nbsp;float[] IN_STATE_ENERGY_CONSUMPTION</pre>
<div class="block"><pre>
 I've assumed that during transmission a node consumes maxTransmissionPower, no matter of currentTransmissionPower.
 It means that when battery is discharged, a node transmitt with e.g. 80% of maxTransmissionPower but it still needs maxTransmissionPower to perform the transmission. 
 
 If you want to change maxTransmissionPower into currentTransmissionPower - you will need to periodically update the inStateEnergyConsumption array (since float is not mutable)
 
 States: [turned off , transmitting, idle, sleep, deep sleep, ?]
 
 TODO: Check the values and define required dependencies (if there are any (?)).
 
 </pre></div>
</li>
</ul>
<a name="MAX_BACKOFF_TIME">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MAX_BACKOFF_TIME</h4>
<pre>private static final&nbsp;float MAX_BACKOFF_TIME</pre>
<div class="block">Maximum backoff time that may be generated 
 
 TODO: Is the value realistic ?
 TODO: Should we use a BackoffCounter object instead ?</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="constant-values.html#Node.MAX_BACKOFF_TIME">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="currentTransmissionPower">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>currentTransmissionPower</h4>
<pre>private&nbsp;float currentTransmissionPower</pre>
<div class="block">The value decreases when battery level goes down (and does not change when power-supplied)
 Initial value = MAX_TRANSMISSION_POWER</div>
</li>
</ul>
<a name="ID">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ID</h4>
<pre>byte ID</pre>
<div class="block">Each node has an ID.
 If the network will consist of more than 127 nodes you should rebuild the ID scheme (byte range -128:127, 0-127 are for nodes IDs, -128:-1 are for groups IDs)</div>
</li>
</ul>
<a name="groupIDs">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>groupIDs</h4>
<pre>java.util.ArrayList&lt;java.lang.Byte&gt; groupIDs</pre>
<div class="block">Each node may be a member of a number of groups
 
 TODO: implement group related functions (join, leave, and so on)!</div>
</li>
</ul>
<a name="position">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>position</h4>
<pre><a href="Position.html" title="class in &lt;Unnamed&gt;">Position</a> position</pre>
<div class="block">Each node has an (x, y) position. The position is needed to calculate distance between nodes, and the distance is needed for path loss (power decrease)</div>
</li>
</ul>
<a name="queue">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>queue</h4>
<pre>java.util.ArrayList&lt;<a href="Packet.html" title="class in &lt;Unnamed&gt;">Packet</a>&gt; queue</pre>
<div class="block">Queue of packets to send
 
 TODO: Is there always only one queue ?</div>
</li>
</ul>
<a name="nodeState">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>nodeState</h4>
<pre>private&nbsp;java.lang.String nodeState</pre>
<div class="block"><pre>
 A node can be in various states:
 
 TURNED_OFF:            discharged - does not do anything 
 TRANSMITTING:  can't synchronize to new transmission
 IDLE:                  can do anything
 SLEEP:                 same as TURNED_OFF but a node goes sleep for a specified time, then goes IDLE
 DEEP_SLEEP:            sleep with no accurate clock - same as sleep, but sleeps for +- specified time
 ???
 
 The node state is needed for energy consumption calcualtions, moreover depending on current state it may/may not perform certain actions.
 Please note, that a node has also phyState and the node state should correspond to the phyState (nodeState=="TRANSMITTING" = phyState=="TX"). 
 
 TODO: Define possible states and their energy consumption !</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="Node.html#IN_STATE_ENERGY_CONSUMPTION"><code>inStateEnergyConsumption
 </pre></code></a></dd>
</dl>
</li>
</ul>
<a name="phyState">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>phyState</h4>
<pre>private&nbsp;java.lang.String phyState</pre>
<div class="block"><pre>
 Physical layer can be in 5 states:
 
 From YANS
 TX:                    the PHY is currently transmitting a signal on behalf of its associated MAC
 SYNC:          the PHY is synchronized on a signal and is waiting until it has received its last bit to forward it to the MAC
 IDLE:          the PHY is not in the TX or SYNC states and the energy measured on the medium is LOWER than Energy Detection Threshold (ENERGY_DETECTION_THRESHOLD)
 CCA_BUSY:      the PHY is not in the TX or SYNC states but the energy measured on the medium is HIGHER than Energy Detection Threshold (ENERGY_DETECTION_THRESHOLD)
 NONE:          node is turned off/sleep        
 
 Or in another words:
 TX:                    sending
 SYNC:          receiving
 IDLE:          idle, can start transmission - noise level is low (no other transmissions or transmissions far away)
 CCA_BUSY:      idle, can't start transmission - noise level is high (sum of other transmissions power is too high to start transmission)
 NONE                   node is turned off/sleep        
 </pre></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="Node.html#ENERGY_DETECTION_THRESHOLD"><code>ENERGY_DETECTION_THRESHOLD</code></a></dd>
</dl>
</li>
</ul>
<a name="syncedReception">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>syncedReception</h4>
<pre><a href="Node.Reception.html" title="class in &lt;Unnamed&gt;">Node.Reception</a> syncedReception</pre>
<div class="block">The object represents currently synced transmission and their parameters (encapsulated in Reception object)
 It is null if there is no currently synced reception</div>
</li>
</ul>
<a name="currentTransmission">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>currentTransmission</h4>
<pre><a href="Transmission.html" title="class in &lt;Unnamed&gt;">Transmission</a> currentTransmission</pre>
<div class="block">The object represents currently transmitted transmission
 It is null if node is not transmitting</div>
</li>
</ul>
<a name="battery">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>battery</h4>
<pre><a href="Node.Battery.html" title="class in &lt;Unnamed&gt;">Node.Battery</a> battery</pre>
<div class="block">Each node has a battery or is power supplied
 When power supplied - battery = null;</div>
</li>
</ul>
<a name="batteryPowered">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>batteryPowered</h4>
<pre>boolean batteryPowered</pre>
</li>
</ul>
<a name="cache">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cache</h4>
<pre>private&nbsp;<a href="Node.Cache.html" title="class in &lt;Unnamed&gt;">Node.Cache</a> cache</pre>
<div class="block">A cache that contains a list of received packets. 
 Size of the cache is set when a Node object is being created</div>
</li>
</ul>
<a name="packetsSource">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>packetsSource</h4>
<pre>private&nbsp;<a href="Node.PacketsSource.html" title="class in &lt;Unnamed&gt;">Node.PacketsSource</a> packetsSource</pre>
<div class="block">Source that generates packets</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Node-byte-float:A-byte-byte-float:A-int-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Node</h4>
<pre>Node(byte&nbsp;id_,
     float[]&nbsp;position_,
     byte&nbsp;batteryType_,
     byte&nbsp;packetsSourceType_,
     float[]&nbsp;packetsSourceParameters_,
     int&nbsp;cacheSize_)</pre>
<div class="block">Node constructor</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>id_</code> - ID (number)</dd>
<dd><code>position_</code> - (x,y) coordinates</dd>
<dd><code>batteryType_</code> - batteryType (if -1, no battery - power supplied)</dd>
<dd><code>packetsSourceType_</code> - (</dd>
<dd><code>packetsSourceParameters_</code> - </dd>
<dd><code>cacheSize_</code> - </dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="tryToStartTransmission--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tryToStartTransmission</h4>
<pre><a href="Event.html" title="class in &lt;Unnamed&gt;">Event</a>&nbsp;tryToStartTransmission()</pre>
<div class="block">Tries to start a transmission.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>If success schedules END_OF_TRANSMISSION, otherwise starts another backoff procedure (so schedules TRY_TO_START_TRANSMISSION)</dd>
</dl>
</li>
</ul>
<a name="endOfTransmission--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>endOfTransmission</h4>
<pre><a href="Event.html" title="class in &lt;Unnamed&gt;">Event</a>&nbsp;endOfTransmission()</pre>
<div class="block">End of transmission.
 When transmission has ended, if there is something in queue, start backoff procedure</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>may return scheduled TRY_TO_START_TRANSMISSION event or null</dd>
</dl>
</li>
</ul>
<a name="generatePacket--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>generatePacket</h4>
<pre>java.util.ArrayList&lt;<a href="Event.html" title="class in &lt;Unnamed&gt;">Event</a>&gt;&nbsp;generatePacket()</pre>
<div class="block"><pre>
 Packet generation may trigger two Events: 
 1) It always generate NEXT_PACKET_GEN Event, and
 2) addPacketToQueue, if queue was empty, Start backoff procedure, TRY_TO_START_TRANSMISSION
 
 ArrayList of Events is used instead of EventList - I don't need to sort events in this list - they need to be sorted anyway later.
 </pre></div>
</li>
</ul>
<a name="addPacketToQueue-Packet-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addPacketToQueue</h4>
<pre><a href="Event.html" title="class in &lt;Unnamed&gt;">Event</a>&nbsp;addPacketToQueue(<a href="Packet.html" title="class in &lt;Unnamed&gt;">Packet</a>&nbsp;p)</pre>
<div class="block"><pre>
 Adds packet to the queue. If the queue was empty and the node is not transmitting, start backoff procedure, ohterwise do nothing.
 Why need to check phyState!=TX? You add a packet to the queue after its successful reception OR after its generation - it may be generated during transmission.
 </pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>p</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>scheduled TRY_TO_START_TRANSMISSION event or null</dd>
</dl>
</li>
</ul>
<a name="startBackoffProcedure--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startBackoffProcedure</h4>
<pre><a href="Event.html" title="class in &lt;Unnamed&gt;">Event</a>&nbsp;startBackoffProcedure()</pre>
<div class="block"><pre>
 I've decided to make it very simple at the moment so I don't use BackoffCounter object and any logic.
 Actually it schedules TRY_TO_START_TRANSMISSION event. That's it.
 </pre></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>scheduled TRY_TO_START_TRANSMISSION event;</dd>
</dl>
</li>
</ul>
<a name="goSleep-float-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>goSleep</h4>
<pre><a href="Event.html" title="class in &lt;Unnamed&gt;">Event</a>&nbsp;goSleep(float&nbsp;duration)</pre>
<div class="block">Node goes to sleep for a given time</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>duration</code> - time of sleep</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>scheduled WAKE_UP event</dd>
</dl>
</li>
</ul>
<a name="wakeUp--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>wakeUp</h4>
<pre>java.util.ArrayList&lt;<a href="Event.html" title="class in &lt;Unnamed&gt;">Event</a>&gt;&nbsp;wakeUp()</pre>
<div class="block">TODO: Specify, how a node behaves after waking up. I've assumed that it generates a packet - it will start a chain of other events (transmission and generation of another packet)</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>list of events generated by generatePacket() function</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="Node.html#generatePacket--"><code>generatePacket()</code></a></dd>
</dl>
</li>
</ul>
<a name="processPacket-Packet-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processPacket</h4>
<pre>private&nbsp;<a href="Event.html" title="class in &lt;Unnamed&gt;">Event</a>&nbsp;processPacket(<a href="Packet.html" title="class in &lt;Unnamed&gt;">Packet</a>&nbsp;p)</pre>
<div class="block">If packet already cached - do nothing. Otherwise:
 add packet to cache, check whether the node supposed to performPacketActions and whether the packet should be sent further</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>p</code> - </dd>
</dl>
</li>
</ul>
<a name="startReceiving-Transmission-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startReceiving</h4>
<pre><a href="Event.html" title="class in &lt;Unnamed&gt;">Event</a>&nbsp;startReceiving(<a href="Transmission.html" title="class in &lt;Unnamed&gt;">Transmission</a>&nbsp;t)</pre>
</li>
</ul>
<a name="endOfSyncedReception-Transmission-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>endOfSyncedReception</h4>
<pre><a href="Event.html" title="class in &lt;Unnamed&gt;">Event</a>&nbsp;endOfSyncedReception(<a href="Transmission.html" title="class in &lt;Unnamed&gt;">Transmission</a>&nbsp;t)</pre>
<div class="block"><pre>
 Actions related with the end of synced reception. Determine whether the packet was successfully received and process the packet.
 Details in the source code comments.
</pre></div>
</li>
</ul>
<a name="performPacketActions-Packet-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>performPacketActions</h4>
<pre>private&nbsp;void&nbsp;performPacketActions(<a href="Packet.html" title="class in &lt;Unnamed&gt;">Packet</a>&nbsp;p)</pre>
<div class="block">TODO: Actions related with packet performing eg. nodeStateChange (the ProvisionerNode (?) may send a goToSleep request)</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>p</code> - </dd>
</dl>
</li>
</ul>
<a name="updateTransmissionPower--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateTransmissionPower</h4>
<pre>void&nbsp;updateTransmissionPower()</pre>
<div class="block"><pre>
 Updates node currentTransmissionPower based on node state (battery level and (???) so on)
 I've assumed that transmission power corresponds to battery level (in %), however I guess it is not truth - big battery discharged to 30% has still much more energy than fully charged small battery 
 e.g:
 Pcurr=Min(Pcurr,Pcurr-6*(0.5-batteryLevel/100)) - the curve is nice, but don't ask me if it corresponds to the reality. 
 Properties:
 ----------------
 battery        Pcurr
 ----------------
 100-50%        Pmax
 50-0%  linear degradation (linear in dBms!)
 0%             Pmax-3
 remember that we use dBms - when battery goes to 0, signal is 2 times weaker
 
 TODO: REALISTIC formula describing relation between node state and transmission power.
 </pre></div>
</li>
</ul>
<a name="nodeStateChange-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>nodeStateChange</h4>
<pre>private&nbsp;void&nbsp;nodeStateChange(java.lang.String&nbsp;nodeState_)</pre>
<div class="block"><pre>
 Changes the nodeState.
 If battery powered, drain the battery.
 </pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>nodeState_</code> - </dd>
</dl>
</li>
</ul>
<a name="switchOff--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>switchOff</h4>
<pre>void&nbsp;switchOff()</pre>
<div class="block">switches Node into the TURNED_OFF state.</div>
</li>
</ul>
<a name="isNodeDestination-Packet-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isNodeDestination</h4>
<pre>private&nbsp;boolean&nbsp;isNodeDestination(<a href="Packet.html" title="class in &lt;Unnamed&gt;">Packet</a>&nbsp;p)</pre>
<div class="block">Whether packet is destinated for the node</div>
</li>
</ul>
<a name="doesNodeBelongToDestinationGroup-Packet-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doesNodeBelongToDestinationGroup</h4>
<pre>private&nbsp;boolean&nbsp;doesNodeBelongToDestinationGroup(<a href="Packet.html" title="class in &lt;Unnamed&gt;">Packet</a>&nbsp;p)</pre>
<div class="block">Whether packet is destinated for the group the node belongs to</div>
</li>
</ul>
<a name="isQueueEmpty--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isQueueEmpty</h4>
<pre>private&nbsp;boolean&nbsp;isQueueEmpty()</pre>
</li>
</ul>
<a name="isAbleToReceive--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isAbleToReceive</h4>
<pre>boolean&nbsp;isAbleToReceive()</pre>
<div class="block">The node can receive a transmission only when it is turned on (thus nodeState == IDLE or TRANSMITTING)</div>
</li>
</ul>
<a name="isAbleToSync--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isAbleToSync</h4>
<pre>private&nbsp;boolean&nbsp;isAbleToSync()</pre>
<div class="block">Checks if a node is able to sync, node is idle and (phyState is IDLE or CCA)</div>
</li>
</ul>
<a name="isAbleToTransmit--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isAbleToTransmit</h4>
<pre>private&nbsp;boolean&nbsp;isAbleToTransmit()</pre>
<div class="block">Checks if a node is able to transmit: node is IDLE, phyState is IDLE, there is something to send</div>
</li>
</ul>
<a name="determinePhyState--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>determinePhyState</h4>
<pre>private&nbsp;void&nbsp;determinePhyState()</pre>
<div class="block">If phyState == IDLE or CCA_BUSY - compares noise lvl with ENERGY_DETECTION_THRESHOLD and sets phyState to IDLE or CCA_BUSY</div>
</li>
</ul>
<a name="putInBattery-byte-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>putInBattery</h4>
<pre>private&nbsp;void&nbsp;putInBattery(byte&nbsp;batteryType_)</pre>
<div class="block">Initializes battery object</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>batteryType_</code> - - different types of batteries are allowed</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="Node.Battery.html" title="class in &lt;Unnamed&gt;"><code>Node.Battery</code></a></dd>
</dl>
</li>
</ul>
<a name="drainBattery--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>drainBattery</h4>
<pre>void&nbsp;drainBattery()</pre>
<div class="block">Drains battery with certain power</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="Node.Battery.html#drainBattery-float-"><code>Node.Battery.drainBattery(float)</code></a></dd>
</dl>
</li>
</ul>
<a name="getNodeStateNr-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNodeStateNr</h4>
<pre>private static&nbsp;byte&nbsp;getNodeStateNr(java.lang.String&nbsp;nodeState_)</pre>
<div class="block">Points at a proper position in inStateEnergyConsumption.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>position related with given state name</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="Node.html#IN_STATE_ENERGY_CONSUMPTION"><code>IN_STATE_ENERGY_CONSUMPTION</code></a>, 
<a href="Node.html#nodeState"><code>nodeState</code></a>, 
<a href="Node.Battery.html#drainBattery-float-"><code>Node.Battery.drainBattery(float)</code></a></dd>
</dl>
</li>
</ul>
<a name="addPacketToCache-Packet-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addPacketToCache</h4>
<pre>private&nbsp;void&nbsp;addPacketToCache(<a href="Packet.html" title="class in &lt;Unnamed&gt;">Packet</a>&nbsp;p)</pre>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>p</code> - </dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="Node.Cache.html#addPacketToCache-Packet-"><code>Node.Cache.addPacketToCache(Packet)</code></a></dd>
</dl>
</li>
</ul>
<a name="getFirstPacketFromQueue--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFirstPacketFromQueue</h4>
<pre>private&nbsp;<a href="Packet.html" title="class in &lt;Unnamed&gt;">Packet</a>&nbsp;getFirstPacketFromQueue()</pre>
<div class="block">Get the first packet from the queue and remove it from the queue (only one queue per node is assumed)</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>First packet from the queue</dd>
</dl>
</li>
</ul>
<a name="getPhyState--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPhyState</h4>
<pre>java.lang.String&nbsp;getPhyState()</pre>
</li>
</ul>
<a name="getNodeState--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNodeState</h4>
<pre>java.lang.String&nbsp;getNodeState()</pre>
</li>
</ul>
<a name="getCurrentTransmissionPower--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCurrentTransmissionPower</h4>
<pre>float&nbsp;getCurrentTransmissionPower()</pre>
</li>
</ul>
<a name="getCurrentBatteryLevel--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getCurrentBatteryLevel</h4>
<pre>double&nbsp;getCurrentBatteryLevel()</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns battery level (in %)</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Node.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="deprecated-list.html">Deprecated</a></li>
<li><a href="index-files/index-1.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="Medium.html" title="class in &lt;Unnamed&gt;"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="Node.Battery.html" title="class in &lt;Unnamed&gt;"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="index.html?Node.html" target="_top">Frames</a></li>
<li><a href="Node.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
